{% extends 'layout.html' %}

{% block title %}
    <title>Modifier un signalement</title>
{% endblock %}

{% block body %}
<div class="container mt-4">
    <h2>Modifier un signalement</h2>
    <br>

    <form method="post" action="{{ url_for('valid_edit_signalement') }}">
        <input type="hidden" name="id" value="{{ signalement.id }}">

        <div class="col-md-8 mb-3">
            <div class="col-md-6">
                <label for="date_signalement" class="form-label">Date</label>
                <input type="date" id="date_signalement" name="date_signalement" class="form-control" value="{{ signalement.date_signalement }}" required>
            </div>

            <div class="col-md-6">
                <label for="type_signalement_id" class="form-label">Type</label>
                <select id="type_signalement_id" name="type_signalement_id" class="form-select" required>
                    {% for type in types %}
                        <option value="{{ type.id }}" {% if type.id == signalement.type_signalement_id %}selected{% endif %}>
                            {{ type.libelle }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-6">
                <label for="adherent_id" class="form-label">Adh√©rent</label>
                <select id="adherent_id" name="adherent_id" class="form-select" required>
                    {% for adherent in adherents %}
                        <option value="{{ adherent.id }}" {% if adherent.id == signalement.adherent_id %}selected{% endif %}>
                            {{ adherent.nom }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-6">
                <label for="parcelle_id" class="form-label">Parcelle</label>
                <select id="parcelle_id" name="parcelle_id" class="form-select" required>
                    {% for parcelle in parcelles %}
                        <option value="{{ parcelle.id }}" {% if parcelle.id == signalement.parcelle_id %}selected{% endif %}>
                            {{ parcelle.id }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-12">
                <label for="descriptif" class="form-label">Descriptif</label>
                <textarea id="descriptif" name="descriptif" class="form-control" rows="3">{{ signalement.descriptif }}</textarea>
            </div>

            <div class="col-md-6">
                <label for="photo" class="form-label">Photo (nom de fichier)</label>
                <input type="text" id="photo" name="photo" class="form-control" value="{{ signalement.photo }}" placeholder="ex: photo.png">
            </div>

            <br>
        </div>

        <div class="mt-3">
            <button type="submit" class="btn btn-success me-3">Enregistrer</button>
            <a href="{{ url_for('show_signalement') }}" class="btn btn-secondary">Retour</a>
        </div>
    </form>
</div>
{% endblock %}