{% extends 'layout.html' %}

{% block body %}
<h1 class="mb-4">Modifier un signalement</h1>
<form method="post" action="{{ url_for('valid_edit_signalement') }}" class="row g-3">
    <input type="hidden" name="id" value="{{ signalement.id }}">
    <div class="col-12">
        <label for="descriptif" class="form-label">Descriptif</label>
        <textarea id="descriptif" name="descriptif" class="form-control" rows="3" required>{{ signalement.descriptif }}</textarea>
    </div>
    <div class="col-md-4">
        <label for="date_signalement" class="form-label">Date</label>
        <input type="date" id="date_signalement" name="date_signalement" class="form-control" value="{{ signalement.date_signalement }}" required>
    </div>
    <div class="col-md-4">
        <label for="type_signalement_id" class="form-label">Type</label>
        <select id="type_signalement_id" name="type_signalement_id" class="form-select" required>
            {% for type in types %}
                <option value="{{ type.id }}" {% if type.id == signalement.type_signalement_id %}selected{% endif %}>
                    {{ type.libelle }}
                </option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-4">
        <label for="adherent_id" class="form-label">Adh√©rent</label>
        <select id="adherent_id" name="adherent_id" class="form-select" required>
            {% for adherent in adherents %}
                <option value="{{ adherent.id }}" {% if adherent.id == signalement.adherent_id %}selected{% endif %}>
                    {{ adherent.nom }}
                </option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-6">
        <label for="parcelle_id" class="form-label">Parcelle</label>
        <select id="parcelle_id" name="parcelle_id" class="form-select" required>
            {% for parcelle in parcelles %}
                <option value="{{ parcelle.id }}" {% if parcelle.id == signalement.parcelle_id %}selected{% endif %}>
                    {{ parcelle.id }}
                </option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-6">
        <label for="photo" class="form-label">Photo (nom de fichier)</label>
        <input type="text" id="photo" name="photo" class="form-control" value="{{ signalement.photo }}">
    </div>
    <div class="col-12 d-flex gap-2">
        <button type="submit" class="btn btn-primary">Enregistrer</button>
        <a class="btn btn-secondary" href="{{ url_for('show_signalement') }}">Annuler</a>
    </div>
</form>
{% endblock %}